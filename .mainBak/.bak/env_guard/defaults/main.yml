---
# =============================================================================
# Environment Guard Framework - Homelab Edition (Updated)
# Author: jeleel-muibi | Date: 2025-08-30 | Version: 2.0.0
# =============================================================================

env_guard:
  # Simple 3-environment taxonomy with computed behaviors
  environments:
    dev:
      aliases: [ dev, development, local ]
      risk_level: 1
      approval_required: false
      monitoring_level: basic
      deployment_window: always
      health_check_timeout: 30

    staging:
      aliases: [ staging, stage, preprod ]
      risk_level: 5
      approval_required: false
      monitoring_level: standard
      deployment_window: business_hours
      health_check_timeout: 60

    production:
      aliases: [ production, prod, live ]
      risk_level: 10
      approval_required: true
      monitoring_level: comprehensive
      deployment_window: maintenance_window
      health_check_timeout: 120

  # Homelab security framework (enterprise-ready)
  security:
    rbac:
      enabled: true
      policies:
        homelab_admin: [ jeleel-muibi ]
        readonly: [ guest ]

    change_management:
      enabled: false
      required_for_production: false

    compliance:
      frameworks: [ basic_audit ]
      audit_retention_days: 365

  # Intelligent deployment windows
  deployment:
    windows:
      always:
        days: [ monday, tuesday, wednesday, thursday, friday, saturday, sunday ]
        hours: { start: "00:00", end: "23:59" }

      business_hours:
        days: [ monday, tuesday, wednesday, thursday, friday ]
        hours: { start: "09:00", end: "17:00" }

      maintenance_window:
        days: [ saturday, sunday ]
        hours: { start: "10:00", end: "16:00" }

    blackout_periods: []

  # Homelab observability (user-friendly paths)
  observability:
    metrics:
      enabled: true
      namespace: "homelab.env_guard"

    logging:
      audit_path: "{{ ansible_env.HOME | default('/tmp') }}/logs/env_guard_audit.log"
      structured: true

    alerting:
      enabled: false

# Framework engine constants
_env_guard:
  version: "2.0.0"
  author: "jeleel-muibi"
  created: "2025-08-30"
  homelab: true

  patterns:
    execution_id: "envguard-{{ ansible_date_time.epoch }}-{{ 1000 | random }}"
    correlation_id: "{{ ansible_date_time.iso8601_basic_short }}-{{ ansible_hostname | default('homelab') }}"

# Risk assessment weights
_risk_factors:
  environment_weight: 0.5
  scope_weight: 0.2
  timing_weight: 0.2
  user_weight: 0.1
