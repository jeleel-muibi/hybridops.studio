---
# SPDX-License-Identifier: MIT-0
# Author: Jeleel Muibi (hybridops.studio)
# Created: 2025-08-30 11:27:47 UTC
# Updated: 2025-09-10 â€” Style normalized to compact header
#
# Purpose: Central paths, environment profiles, and audit settings for Homelab Edition.

# Project root discovery
_project_root: "{{ playbook_dir | regex_replace('/common/playbooks.*$', '') | regex_replace('/roles/.*$', '') }}"

env_guard:
  # Framework version
  version: "2.1.2"

  # Paths configuration
  paths:
    project_root: "{{ _project_root }}"
    logs_dir: "{{ _project_root }}/common/logs"
    env_guard_logs_dir: "{{ _project_root }}/common/logs/env_guard_logs"

  # Environment definitions
  environments:
    dev: &dev_base
      risk_level: 1
      approval_required: false
      monitoring_level: basic
      deployment_window: always
      health_check_timeout: 30
    staging:
      <<: *dev_base
      risk_level: 5
      monitoring_level: standard
      deployment_window: business_hours
      health_check_timeout: 60
    prod:
      <<: *dev_base
      risk_level: 10
      approval_required: true
      monitoring_level: comprehensive
      deployment_window: maintenance_window
      health_check_timeout: 120

  # RBAC configuration
  security:
    rbac:
      enabled: true
      homelab_admin: [ jeleel-muibi ]

  # Deployment windows
  deployment:
    windows:
      always:
        days: &all_days [ monday, tuesday, wednesday, thursday, friday, saturday, sunday ]
        hours: { start: "00:00", end: "23:59" }
      business_hours:
        days: &weekdays [ monday, tuesday, wednesday, thursday, friday ]
        hours: { start: "09:00", end: "17:00" }
      maintenance_window:
        days: [ saturday, sunday ]
        hours: { start: "10:00", end: "16:00" }

  # Observability
  observability:
    logging:
      audit_path: "{{ _project_root }}/common/logs/env_guard_logs/env_guard_audit.log"
      structured: true

  # Audit and compliance
  audit:
    enabled: true
    log_file: "env_guard_audit.log"
    report_prefix: "env_guard_report"
    retention_days: 90
    correlation_in_filenames: true # filename stamping toggle

# Framework metadata
_env_guard:
  version: "2.1.2"
  author: "jeleel-muibi"
  updated: "2025-01-09 19:09:03"
  execution_id: "envguard-{{ ansible_date_time.epoch }}-{{ 1000 | random }}"

# Legacy compatibility
_legacy_environment_mapping:
  production: prod
  live: prod
