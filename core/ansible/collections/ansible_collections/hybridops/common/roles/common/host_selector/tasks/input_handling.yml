---
# SPDX-License-Identifier: MIT-0
# Author: Jeleel Muibi (hybridops.studio)
# Created: 2025-09-10 21:20:00 UTC
# Updated: 2025-09-10 â€” Initial method selection and validation logic
#
# Purpose: Capture selection method and validate.

- name: Trace CID before menu
  when: host_selector_use_cid
  debug:
    msg: "[cid={{ cid | default('') }}] awaiting method selection"
    verbosity: 1

- name: Display menu and get selection method
  pause:
    prompt: "{{ menu_text }}"
  register: method_input

- name: Set method
  set_fact:
    method: "{{ method_input.user_input | upper }}"

- name: Validate method input
  fail:
    msg: "{{ messages.invalid_method }}"
  when: method not in ['A', 'B', 'C', 'D']

- name: Use environment from env_guard
  set_fact:
    env: "{{ validated_env }}"
